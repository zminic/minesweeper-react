(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(7),r=n.n(i),l=(n(15),n(8)),u=n(1),o=n(2),c=n(4),m=n(3),v=n(5),h=function(e){var t=["square"];e.className&&t.push(e.className),e.value.isRevealed?(t.push("revealed"),e.value.isMine&&t.push("mine")):e.value.isFlag&&t.push("flag");var n=e.value.isRevealed&&!e.value.isMine&&0!==e.value.mineCount?e.value.mineCount:"";return s.a.createElement("button",{className:t.join(" "),onClick:e.onClick,onContextMenu:function(t){e.onContextMenu(t),t.preventDefault()}},n)},d=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){for(var e=this,t=[],n=function(n){t.push(s.a.createElement(h,{key:n,value:e.props.squares[n],className:n%e.props.level.dimension===0?"break":"",onClick:function(){return e.props.onReveal(n)},onContextMenu:function(){return e.props.onFlag(n)}}))},a=0;a<this.props.squares.length;a++)n(a);return s.a.createElement("div",{className:"board",style:this.props.style},t,s.a.createElement("div",{className:"clear"}))}}]),t}(a.Component),f=(n(16),function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).timer=0,n.getRandomNumber=function(e){return Math.floor(1e3*Math.random()+1)%e},n.stopTimer=function(){return clearInterval(n.timer)};var a={levels:[{name:"Easy",dimension:7,mineCount:5},{name:"Beginner",dimension:9,mineCount:10},{name:"Intermediate",dimension:12,mineCount:24},{name:"Advanced",dimension:16,mineCount:60}],timeElapsed:0};return n.state=Object(l.a)({},a,{gameState:"new",selectedLevel:a.levels[0],squares:n.initSquares(a.levels[0])}),n}return Object(v.a)(t,e),Object(o.a)(t,[{key:"levelSelected",value:function(e){var t=this.state.levels.find(function(t){return t.name===e.currentTarget.value});t&&this.newGame(t)}},{key:"newGame",value:function(e){this.stopTimer(),this.setState({selectedLevel:e,squares:this.initSquares(e),gameState:"new",timeElapsed:0})}},{key:"initSquares",value:function(e){for(var t=e.dimension*e.dimension,n=Array(t).fill(null),a=0;a<t;a++)n[a]={isRevealed:!1,isMine:!1,isFlag:!1,index:a,mineCount:0};for(var s=0;s<e.mineCount;){var i=this.getRandomNumber(t);n[i].isMine||(n[i].isMine=!0,s++)}for(var r=0;r<t;r++)n[r].isMine||(n[r].mineCount=this.getAdjacentFields(e,n,r).filter(function(e){return e.isMine}).length);return n}},{key:"flagSquare",value:function(e){var t=this.state.squares.slice(),n=t[e];n.isRevealed||(n.isFlag=!n.isFlag,this.setState({squares:t}))}},{key:"revealSquare",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.state.selectedLevel,s=this.state.squares.slice(),i=s[e];if(0===this.state.timeElapsed&&this.startTimer(),!n||!i.isRevealed){if(i.isMine)this.setState({gameState:"lost"}),this.stopTimer(),this.revealBoard();else if(i.isRevealed&&!n){var r=this.getAdjacentFields(a,s,e).filter(function(e){return e.isFlag});i.mineCount===r.length&&this.getAdjacentFields(a,s,e).filter(function(e){return!e.isRevealed&&!e.isFlag}).forEach(function(e){return t.revealSquare(e.index,!0)})}else i.isRevealed=!0,i.isFlag=!1,0===i.mineCount&&this.getAdjacentFields(a,s,e).forEach(function(e){return t.revealSquare(e.index,!0)}),s.filter(function(e){return!e.isRevealed}).length===a.mineCount&&(this.setState({gameState:"won"}),this.stopTimer());this.setState({squares:s})}}},{key:"revealBoard",value:function(){for(var e=this.state.squares.slice(),t=0;t<e.length;t++)e[t].isRevealed=!0;this.setState({squares:e})}},{key:"getAdjacentFields",value:function(e,t,n){var a=e.dimension,s=a*a,i=[],r=function(e){return e%a===0&&0!==e},l=function(e){return(e+1)%a===0&&e!==s-1};return n-a>=0&&i.push(t[n-a]),n+a<s&&i.push(t[n+a]),n-1>=0&&!r(n)&&i.push(t[n-1]),n+1<s&&!l(n)&&i.push(t[n+1]),n-a-1>=0&&!r(n-a)&&i.push(t[n-a-1]),n-a+1>=0&&!l(n-a)&&i.push(t[n-a+1]),n+a-1<s&&!r(n+a)&&i.push(t[n+a-1]),n+a+1<s&&!l(n-a)&&i.push(t[n+a+1]),i}},{key:"startTimer",value:function(){var e=this;this.stopTimer(),this.timer=window.setInterval(function(){e.setState({timeElapsed:e.state.timeElapsed+.1})},100)}},{key:"statusMessage",value:function(){var e=this.state.timeElapsed.toFixed(1);switch(this.state.gameState){case"new":case"in-progress":return s.a.createElement("h2",null,"Your time: ",e);case"won":return s.a.createElement("h2",null,"Game over! You won! (",e," s)");case"lost":return s.a.createElement("h2",null,"Game over! You lost! (",e," s)")}}},{key:"render",value:function(){var e=this,t=[],n=!0,a=!1,i=void 0;try{for(var r,l=this.state.levels[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var u=r.value;t.push(s.a.createElement("option",{key:u.name,value:u.name},u.name))}}catch(o){a=!0,i=o}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return s.a.createElement("div",{className:"game"},this.statusMessage(),s.a.createElement("select",{onChange:function(t){return e.levelSelected(t)}},t),s.a.createElement("button",{onClick:function(){return e.newGame(e.state.selectedLevel)}},"New game"),s.a.createElement(d,{squares:this.state.squares,level:this.state.selectedLevel,onReveal:function(t){return e.revealSquare(t)},onFlag:function(t){return e.flagSquare(t)},style:{width:40*this.state.selectedLevel.dimension}}))}}]),t}(a.Component));r.a.render(s.a.createElement(f,null),document.getElementById("root"))},9:function(e,t,n){e.exports=n(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.bfa0319c.chunk.js.map